{"ast":null,"code":"var _jsxFileName = \"/home/lucaswerner/repositories/trybe-projects/sd-03-recipes-app-01/src/components/DetailsCard.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes, { number } from 'prop-types';\nimport ReactPlayer from 'react-player';\nimport { Link } from 'react-router-dom';\nimport Card from './Card';\nimport Carrosel from './Carrosel';\nimport ActionsBar from './ActionsBar';\nimport { sendToFavoriteStorage, rmFromFavoriteStorage } from '../services/APIs/APIlocalStorage';\nimport { takeFavStorage } from '../services/APIs/APIlocalStorage';\nimport { FoodsContext } from '../contexts/FoodsContext';\nimport * as getAllApi from '../services/APIs/APIlocalStorage';\nimport { handleDrinksData } from '../services/APIs/DRINKS_API';\nimport { handleFoodsData, fetchRecomendations } from '../services/APIs/FOODS_API';\n\nfunction ButtonFunc(props) {\n  const {\n    eat,\n    type\n  } = props;\n  const {\n    ingredients,\n    id\n  } = eat;\n  const [, {\n    setFoodInproggress\n  }] = useContext(FoodsContext);\n  const getIngre = getAllApi.getIngredients()[id];\n\n  function getIngredients() {\n    const ignt = JSON.parse(localStorage.getItem('inProggressRecipes')) || {};\n    localStorage.setItem('inProggressRecipes', JSON.stringify({ ...ignt,\n      [id]: ingredients.reduce((acc, elIngredients) => {\n        const obj = { ...acc,\n          [elIngredients.ingredient]: false\n        };\n        return obj;\n      }, {})\n    }));\n    setFoodInproggress(eat);\n  }\n\n  return /*#__PURE__*/React.createElement(Link, {\n    to: `${type === 'food' ? '/comidas' : '/bebidas'}/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"start-recipe-btn\",\n    className: \"buttonIniciar\",\n    onClick: () => getIngredients(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, getIngre ? 'Continuar Receita' : 'Iniciar Receita'));\n}\n\nfunction DetailsCard({\n  eat,\n  type\n}) {\n  const [recomends, setRecomends] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const ifDone = getAllApi.doneRecipes().some(element => element.id === Number(eat.id));\n  console.log(number);\n  useEffect(() => {\n    let url = '';\n    if (type === 'food') url = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n    if (type === 'drink') url = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\n    fetchRecomendations(url).then(obj => {\n      let arr = [];\n      Object.entries(obj).forEach(([key, value]) => {\n        if (key === 'drinks') arr = value.slice(0, 6).map(drk => handleDrinksData(drk));\n        if (key === 'meals') arr = value.slice(0, 6).map(meal => handleFoodsData(meal));\n      });\n      setRecomends(arr);\n    }).then(() => setLoading(false)).catch(err => {\n      console.log(err);\n      setError(err);\n    });\n  }, [type]);\n  const {\n    id,\n    name,\n    srcImage,\n    video,\n    category,\n    ingredients,\n    instructions,\n    isAlcoholic\n  } = eat;\n\n  const handleFavoriteStorage = isToSend => {\n    if (isToSend) return sendToFavoriteStorage(eat, type);\n    return rmFromFavoriteStorage(id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    key: id,\n    name: name,\n    index: -100,\n    srcImage: srcImage,\n    testid: {\n      title: 'recipe-title',\n      img: 'recipe-photo'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ActionsBar, {\n    handleFavorite: handleFavoriteStorage,\n    isFavInit: takeFavStorage().some(favorite => Number(favorite.id) === Number(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, isAlcoholic || category), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, ingredients.map(({\n    ingredient,\n    measure\n  }, index) => /*#__PURE__*/React.createElement(\"li\", {\n    \"data-testid\": `${index}-ingredient-name-and-measure`,\n    key: ingredient,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, ingredient, \" \", measure))), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, instructions.replace(/\\r\\n/g, ' ')), video && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactPlayer, {\n    url: video,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 42\n    }\n  })), error && /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"error-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Aconteceu algo errado em recomenda\\xE7\\xF5es\"), !error && loading && /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Carrgando detalhes de comida...\"), !error && !loading && recomends && /*#__PURE__*/React.createElement(Carrosel, {\n    cards: recomends,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 43\n    }\n  }), ifDone || /*#__PURE__*/React.createElement(ButtonFunc, {\n    eat: eat,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }));\n}\n\nButtonFunc.propTypes = {\n  eat: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n};\nDetailsCard.propTypes = {\n  eat: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    // number as string\n    name: PropTypes.string.isRequired,\n    category: PropTypes.string.isRequired,\n    instructions: PropTypes.string.isRequired,\n    origin: PropTypes.string.isRequired,\n    srcImage: PropTypes.string.isRequired,\n    video: PropTypes.string.isRequired,\n    source: PropTypes.string.isRequired,\n    ingredients: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string.isRequired).isRequired).isRequired,\n    isAlcoholic: PropTypes.bool\n  }).isRequired,\n  type: PropTypes.oneOf(['food', 'drink']).isRequired\n};\nexport default DetailsCard;","map":{"version":3,"sources":["/home/lucaswerner/repositories/trybe-projects/sd-03-recipes-app-01/src/components/DetailsCard.js"],"names":["React","useState","useEffect","useContext","PropTypes","number","ReactPlayer","Link","Card","Carrosel","ActionsBar","sendToFavoriteStorage","rmFromFavoriteStorage","takeFavStorage","FoodsContext","getAllApi","handleDrinksData","handleFoodsData","fetchRecomendations","ButtonFunc","props","eat","type","ingredients","id","setFoodInproggress","getIngre","getIngredients","ignt","JSON","parse","localStorage","getItem","setItem","stringify","reduce","acc","elIngredients","obj","ingredient","DetailsCard","recomends","setRecomends","loading","setLoading","error","setError","ifDone","doneRecipes","some","element","Number","console","log","url","then","arr","Object","entries","forEach","key","value","slice","map","drk","meal","catch","err","name","srcImage","video","category","instructions","isAlcoholic","handleFavoriteStorage","isToSend","title","img","favorite","measure","index","replace","propTypes","string","isRequired","shape","origin","source","arrayOf","objectOf","bool","oneOf"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,SAAP,IAAoBC,MAApB,QAAkC,YAAlC;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,qBAAT,EAAgCC,qBAAhC,QAA6D,kCAA7D;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,OAAO,KAAKC,SAAZ,MAA2B,kCAA3B;AAEA,SAASC,gBAAT,QAAiC,6BAAjC;AACA,SAASC,eAAT,EAA0BC,mBAA1B,QAAqD,4BAArD;;AAEA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAgBF,KAAtB;AACA,QAAM;AAAEG,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAsBH,GAA5B;AACA,QAAM,GAAG;AAAEI,IAAAA;AAAF,GAAH,IAA6BtB,UAAU,CAACW,YAAD,CAA7C;AACA,QAAMY,QAAQ,GAAGX,SAAS,CAACY,cAAV,GAA2BH,EAA3B,CAAjB;;AAEA,WAASG,cAAT,GAA0B;AACxB,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAX,KAA0D,EAAvE;AACAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,oBAArB,EAA2CJ,IAAI,CAACK,SAAL,CAAe,EACxD,GAAGN,IADqD;AAExD,OAACJ,EAAD,GAAMD,WAAW,CACdY,MADG,CACI,CAACC,GAAD,EAAMC,aAAN,KAAwB;AAC9B,cAAMC,GAAG,GAAG,EAAE,GAAGF,GAAL;AAAU,WAACC,aAAa,CAACE,UAAf,GAA4B;AAAtC,SAAZ;AACA,eAAOD,GAAP;AACD,OAJG,EAID,EAJC;AAFkD,KAAf,CAA3C;AAQAb,IAAAA,kBAAkB,CAACJ,GAAD,CAAlB;AACD;;AAED,sBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAG,GAAEC,IAAI,KAAK,MAAT,GAAkB,UAAlB,GAA+B,UAAW,IAAGE,EAAG,cAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,mBAAY,kBADd;AAEE,IAAA,SAAS,EAAC,eAFZ;AAGE,IAAA,OAAO,EAAE,MAAMG,cAAc,EAH/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIED,QAAQ,GAAG,mBAAH,GAAyB,iBAJnC,CADF,CADF;AAQD;;AAED,SAASc,WAAT,CAAqB;AAAEnB,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAArB,EAAoC;AAClC,QAAM,CAACmB,SAAD,EAAYC,YAAZ,IAA4BzC,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAAC0C,OAAD,EAAUC,UAAV,IAAwB3C,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC4C,KAAD,EAAQC,QAAR,IAAoB7C,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM8C,MAAM,GAAGhC,SAAS,CAACiC,WAAV,GAAwBC,IAAxB,CAA8BC,OAAD,IAAaA,OAAO,CAAC1B,EAAR,KAAe2B,MAAM,CAAC9B,GAAG,CAACG,EAAL,CAA/D,CAAf;AACA4B,EAAAA,OAAO,CAACC,GAAR,CAAYhD,MAAZ;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIoD,GAAG,GAAG,EAAV;AACA,QAAIhC,IAAI,KAAK,MAAb,EAAqBgC,GAAG,GAAG,2DAAN;AACrB,QAAIhC,IAAI,KAAK,OAAb,EAAsBgC,GAAG,GAAG,uDAAN;AAEtBpC,IAAAA,mBAAmB,CAACoC,GAAD,CAAnB,CACGC,IADH,CACSjB,GAAD,IAAS;AACb,UAAIkB,GAAG,GAAG,EAAV;AACAC,MAAAA,MAAM,CAACC,OAAP,CAAepB,GAAf,EAAoBqB,OAApB,CAA4B,CAAC,CAACC,GAAD,EAAMC,KAAN,CAAD,KAAkB;AAC5C,YAAID,GAAG,KAAK,QAAZ,EAAsBJ,GAAG,GAAGK,KAAK,CAACC,KAAN,CAAY,CAAZ,EAAe,CAAf,EAAkBC,GAAlB,CAAuBC,GAAD,IAAShD,gBAAgB,CAACgD,GAAD,CAA/C,CAAN;AACtB,YAAIJ,GAAG,KAAK,OAAZ,EAAqBJ,GAAG,GAAGK,KAAK,CAACC,KAAN,CAAY,CAAZ,EAAe,CAAf,EAAkBC,GAAlB,CAAuBE,IAAD,IAAUhD,eAAe,CAACgD,IAAD,CAA/C,CAAN;AACtB,OAHD;AAIAvB,MAAAA,YAAY,CAACc,GAAD,CAAZ;AACD,KARH,EAQKD,IARL,CAQU,MAAMX,UAAU,CAAC,KAAD,CAR1B,EASGsB,KATH,CASUC,GAAD,IAAS;AAAEf,MAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ;AAAkBrB,MAAAA,QAAQ,CAACqB,GAAD,CAAR;AAAgB,KATtD;AAUD,GAfQ,EAeN,CAAC7C,IAAD,CAfM,CAAT;AAiBA,QAAM;AACJE,IAAAA,EADI;AAEJ4C,IAAAA,IAFI;AAGJC,IAAAA,QAHI;AAIJC,IAAAA,KAJI;AAKJC,IAAAA,QALI;AAMJhD,IAAAA,WANI;AAOJiD,IAAAA,YAPI;AAQJC,IAAAA;AARI,MASFpD,GATJ;;AAWA,QAAMqD,qBAAqB,GAAIC,QAAD,IAAc;AAC1C,QAAIA,QAAJ,EAAc,OAAOhE,qBAAqB,CAACU,GAAD,EAAMC,IAAN,CAA5B;AACd,WAAOV,qBAAqB,CAACY,EAAD,CAA5B;AACD,GAHD;;AAKA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,GAAG,EAAEA,EADP;AAEE,IAAA,IAAI,EAAE4C,IAFR;AAGE,IAAA,KAAK,EAAE,CAAC,GAHV;AAIE,IAAA,QAAQ,EAAEC,QAJZ;AAKE,IAAA,MAAM,EAAE;AAAEO,MAAAA,KAAK,EAAE,cAAT;AAAyBC,MAAAA,GAAG,EAAE;AAA9B,KALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE,oBAAC,UAAD;AACE,IAAA,cAAc,EAAEH,qBADlB;AAEE,IAAA,SAAS,EAAE7D,cAAc,GAAGoC,IAAjB,CAAuB6B,QAAD,IAAc3B,MAAM,CAAC2B,QAAQ,CAACtD,EAAV,CAAN,KAAwB2B,MAAM,CAAC3B,EAAD,CAAlE,CAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eAYE;AAAG,mBAAY,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCiD,WAAW,IAAIF,QAAjD,CAZF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhD,WAAW,CAACwC,GAAZ,CAAgB,CAAC;AAAExB,IAAAA,UAAF;AAAcwC,IAAAA;AAAd,GAAD,EAA0BC,KAA1B,kBACf;AAAI,mBAAc,GAAEA,KAAM,8BAA1B;AAAyD,IAAA,GAAG,EAAEzC,UAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,UADH,OACgBwC,OADhB,CADD,CADH,CAbF,eAoBE;AAAG,mBAAY,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BP,YAAY,CAACS,OAAb,CAAqB,OAArB,EAA8B,GAA9B,CAA/B,CApBF,EAqBGX,KAAK,iBAAI;AAAK,mBAAY,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAyB,oBAAC,WAAD;AAAa,IAAA,GAAG,EAAEA,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzB,CArBZ,EAsBGzB,KAAK,iBAAI;AAAI,mBAAY,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAtBZ,EAuBG,CAACA,KAAD,IAAUF,OAAV,iBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAvBxB,EAwBG,CAACE,KAAD,IAAU,CAACF,OAAX,IAAsBF,SAAtB,iBAAmC,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBtC,EAyBGM,MAAM,iBACL,oBAAC,UAAD;AAAY,IAAA,GAAG,EAAE1B,GAAjB;AAAsB,IAAA,IAAI,EAAEC,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BJ,CADF;AA+BD;;AAEDH,UAAU,CAAC+D,SAAX,GAAuB;AACrB7D,EAAAA,GAAG,EAAEjB,SAAS,CAAC+E,MAAV,CAAiBC,UADD;AAErB9D,EAAAA,IAAI,EAAElB,SAAS,CAAC+E,MAAV,CAAiBC;AAFF,CAAvB;AAKA5C,WAAW,CAAC0C,SAAZ,GAAwB;AACtB7D,EAAAA,GAAG,EAAEjB,SAAS,CAACiF,KAAV,CAAgB;AACnB7D,IAAAA,EAAE,EAAEpB,SAAS,CAAC+E,MAAV,CAAiBC,UADF;AACc;AACjChB,IAAAA,IAAI,EAAEhE,SAAS,CAAC+E,MAAV,CAAiBC,UAFJ;AAGnBb,IAAAA,QAAQ,EAAEnE,SAAS,CAAC+E,MAAV,CAAiBC,UAHR;AAInBZ,IAAAA,YAAY,EAAEpE,SAAS,CAAC+E,MAAV,CAAiBC,UAJZ;AAKnBE,IAAAA,MAAM,EAAElF,SAAS,CAAC+E,MAAV,CAAiBC,UALN;AAMnBf,IAAAA,QAAQ,EAAEjE,SAAS,CAAC+E,MAAV,CAAiBC,UANR;AAOnBd,IAAAA,KAAK,EAAElE,SAAS,CAAC+E,MAAV,CAAiBC,UAPL;AAQnBG,IAAAA,MAAM,EAAEnF,SAAS,CAAC+E,MAAV,CAAiBC,UARN;AASnB7D,IAAAA,WAAW,EAAEnB,SAAS,CAACoF,OAAV,CACXpF,SAAS,CAACqF,QAAV,CACErF,SAAS,CAAC+E,MAAV,CAAiBC,UADnB,EAEEA,UAHS,EAIXA,UAbiB;AAcnBX,IAAAA,WAAW,EAAErE,SAAS,CAACsF;AAdJ,GAAhB,EAeFN,UAhBmB;AAiBtB9D,EAAAA,IAAI,EAAElB,SAAS,CAACuF,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB,EAAmCP;AAjBnB,CAAxB;AAoBA,eAAe5C,WAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport PropTypes, { number } from 'prop-types';\nimport ReactPlayer from 'react-player';\nimport { Link } from 'react-router-dom';\n\nimport Card from './Card';\nimport Carrosel from './Carrosel';\nimport ActionsBar from './ActionsBar';\nimport { sendToFavoriteStorage, rmFromFavoriteStorage } from '../services/APIs/APIlocalStorage';\nimport { takeFavStorage } from '../services/APIs/APIlocalStorage';\nimport { FoodsContext } from '../contexts/FoodsContext';\nimport * as getAllApi from '../services/APIs/APIlocalStorage';\n\nimport { handleDrinksData } from '../services/APIs/DRINKS_API';\nimport { handleFoodsData, fetchRecomendations } from '../services/APIs/FOODS_API';\n\nfunction ButtonFunc(props) {\n  const { eat, type } = props;\n  const { ingredients, id } = eat;\n  const [, { setFoodInproggress }] = useContext(FoodsContext);\n  const getIngre = getAllApi.getIngredients()[id];\n\n  function getIngredients() {\n    const ignt = JSON.parse(localStorage.getItem('inProggressRecipes')) || {};\n    localStorage.setItem('inProggressRecipes', JSON.stringify({\n      ...ignt,\n      [id]: ingredients\n        .reduce((acc, elIngredients) => {\n          const obj = { ...acc, [elIngredients.ingredient]: false };\n          return obj;\n        }, {}),\n    }));\n    setFoodInproggress(eat);\n  }\n\n  return (\n    <Link to={`${type === 'food' ? '/comidas' : '/bebidas'}/${id}/in-progress`}>\n      <button\n        data-testid=\"start-recipe-btn\"\n        className=\"buttonIniciar\"\n        onClick={() => getIngredients()}\n      >{getIngre ? 'Continuar Receita' : 'Iniciar Receita'}</button>\n    </Link>);\n}\n\nfunction DetailsCard({ eat, type }) {\n  const [recomends, setRecomends] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const ifDone = getAllApi.doneRecipes().some((element) => element.id === Number(eat.id));\n  console.log(number);\n\n  useEffect(() => {\n    let url = '';\n    if (type === 'food') url = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n    if (type === 'drink') url = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\n\n    fetchRecomendations(url)\n      .then((obj) => {\n        let arr = [];\n        Object.entries(obj).forEach(([key, value]) => {\n          if (key === 'drinks') arr = value.slice(0, 6).map((drk) => handleDrinksData(drk));\n          if (key === 'meals') arr = value.slice(0, 6).map((meal) => handleFoodsData(meal));\n        });\n        setRecomends(arr);\n      }).then(() => setLoading(false))\n      .catch((err) => { console.log(err); setError(err); });\n  }, [type]);\n\n  const {\n    id,\n    name,\n    srcImage,\n    video,\n    category,\n    ingredients,\n    instructions,\n    isAlcoholic,\n  } = eat;\n\n  const handleFavoriteStorage = (isToSend) => {\n    if (isToSend) return sendToFavoriteStorage(eat, type);\n    return rmFromFavoriteStorage(id);\n  };\n\n  return (\n    <div>\n      <Card\n        key={id}\n        name={name}\n        index={-100}\n        srcImage={srcImage}\n        testid={{ title: 'recipe-title', img: 'recipe-photo' }}\n      />\n      <ActionsBar\n        handleFavorite={handleFavoriteStorage}\n        isFavInit={takeFavStorage().some((favorite) => Number(favorite.id) === Number(id))}\n      />\n      <p data-testid=\"recipe-category\">{isAlcoholic || category}</p>\n      <ul>\n        {ingredients.map(({ ingredient, measure }, index) => (\n          <li data-testid={`${index}-ingredient-name-and-measure`} key={ingredient}>\n            {ingredient} {measure}\n          </li>\n        ))}\n      </ul>\n      <p data-testid=\"instructions\">{instructions.replace(/\\r\\n/g, ' ')}</p>\n      {video && <div data-testid=\"video\"><ReactPlayer url={video} /></div>}\n      {error && <h3 data-testid=\"error-details\">Aconteceu algo errado em recomendações</h3>}\n      {!error && loading && <h3>Carrgando detalhes de comida...</h3>}\n      {!error && !loading && recomends && <Carrosel cards={recomends} />}\n      {ifDone ||\n        <ButtonFunc eat={eat} type={type} />\n      }\n    </div>\n  );\n}\n\nButtonFunc.propTypes = {\n  eat: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nDetailsCard.propTypes = {\n  eat: PropTypes.shape({\n    id: PropTypes.string.isRequired, // number as string\n    name: PropTypes.string.isRequired,\n    category: PropTypes.string.isRequired,\n    instructions: PropTypes.string.isRequired,\n    origin: PropTypes.string.isRequired,\n    srcImage: PropTypes.string.isRequired,\n    video: PropTypes.string.isRequired,\n    source: PropTypes.string.isRequired,\n    ingredients: PropTypes.arrayOf(\n      PropTypes.objectOf(\n        PropTypes.string.isRequired,\n      ).isRequired,\n    ).isRequired,\n    isAlcoholic: PropTypes.bool,\n  }).isRequired,\n  type: PropTypes.oneOf(['food', 'drink']).isRequired,\n};\n\nexport default DetailsCard;\n"]},"metadata":{},"sourceType":"module"}