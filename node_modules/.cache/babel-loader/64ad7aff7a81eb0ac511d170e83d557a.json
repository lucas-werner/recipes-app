{"ast":null,"code":"import _slicedToArray from\"/home/lucaswerner/repositories/github-personal/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import{DetailsCard,Carrosel}from'../../components';import{fetchDrinkApi,handleDrinksData}from'../../services/APIs/DRINKS_API';import{fetchFoodsApi,handleFoodsData}from'../../services/APIs/FOODS_API';import useRequisition from'../../hooks/requisition';function DrinkDetailsPage(_ref){var id=_ref.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),drink=_useState2[0],setDrink=_useState2[1];var fetchDrink=useCallback(function(){return fetchDrinkApi(\"lookup.php?i=\".concat(id)).then(function(_ref2){var drinks=_ref2.drinks;return setDrink(handleDrinksData(drinks[0]));});},[id]);var _useRequisition=useRequisition(fetchDrink),_useRequisition2=_slicedToArray(_useRequisition,1),_useRequisition2$=_useRequisition2[0],loading=_useRequisition2$.loading,error=_useRequisition2$.error;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),recomends=_useState4[0],setRecomends=_useState4[1];var fetchRecomends=useCallback(function(){return fetchFoodsApi().then(function(_ref3){var meals=_ref3.meals;return setRecomends(meals.slice(0,6).map(function(meal){return handleFoodsData(meal);}));});},[]);var _useRequisition3=useRequisition(fetchRecomends),_useRequisition4=_slicedToArray(_useRequisition3,1),_useRequisition4$=_useRequisition4[0],loadingRecom=_useRequisition4$.loading,errorRecom=_useRequisition4$.error;if(error)return/*#__PURE__*/React.createElement(\"h1\",null,\"Aconteceu algo errado em detalhes de bebidas\");if(loading)return/*#__PURE__*/React.createElement(\"h1\",null,\"Carrgando detalhes de bebidas...\");return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(DetailsCard,{type:\"drink\",recipe:drink}),errorRecom&&/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"error-details\"},\"Aconteceu algo errado em recomenda\\xE7\\xF5es\"),!errorRecom&&loadingRecom&&/*#__PURE__*/React.createElement(\"h3\",null,\"Carregando detalhes de comida...\"),!errorRecom&&!loadingRecom&&recomends&&/*#__PURE__*/React.createElement(Carrosel,{cards:recomends}));}export default DrinkDetailsPage;","map":{"version":3,"sources":["/home/lucaswerner/repositories/github-personal/recipes-app/src/pages/DrinkDetailsPage/index.js"],"names":["React","useState","useCallback","DetailsCard","Carrosel","fetchDrinkApi","handleDrinksData","fetchFoodsApi","handleFoodsData","useRequisition","DrinkDetailsPage","id","drink","setDrink","fetchDrink","then","drinks","loading","error","recomends","setRecomends","fetchRecomends","meals","slice","map","meal","loadingRecom","errorRecom"],"mappings":"iLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,WAA1B,KAA6C,OAA7C,CAGA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,kBAAtC,CAEA,OAASC,aAAT,CAAwBC,gBAAxB,KAAgD,gCAAhD,CACA,OAASC,aAAT,CAAwBC,eAAxB,KAA+C,+BAA/C,CACA,MAAOC,CAAAA,cAAP,KAA2B,yBAA3B,CAEA,QAASC,CAAAA,gBAAT,MAAkC,IAANC,CAAAA,EAAM,MAANA,EAAM,eACNV,QAAQ,CAAC,IAAD,CADF,wCACzBW,KADyB,eAClBC,QADkB,eAEhC,GAAMC,CAAAA,UAAU,CAAGZ,WAAW,CAAC,iBAAMG,CAAAA,aAAa,wBAAiBM,EAAjB,EAAb,CAClCI,IADkC,CAC7B,mBAAGC,CAAAA,MAAH,OAAGA,MAAH,OAAgBH,CAAAA,QAAQ,CAACP,gBAAgB,CAACU,MAAM,CAAC,CAAD,CAAP,CAAjB,CAAxB,EAD6B,CAAN,EAAD,CAE5B,CAACL,EAAD,CAF4B,CAA9B,CAFgC,oBAKHF,cAAc,CAACK,UAAD,CALX,0FAKvBG,OALuB,mBAKvBA,OALuB,CAKdC,KALc,mBAKdA,KALc,gBAOEjB,QAAQ,CAAC,IAAD,CAPV,yCAOzBkB,SAPyB,eAOdC,YAPc,eAQhC,GAAMC,CAAAA,cAAc,CAAGnB,WAAW,CAAC,iBAAOK,CAAAA,aAAa,GACpDQ,IADuC,CAClC,mBAAGO,CAAAA,KAAH,OAAGA,KAAH,OAAeF,CAAAA,YAAY,CAACE,KAAK,CAACC,KAAN,CAAY,CAAZ,CAAe,CAAf,EAAkBC,GAAlB,CAAsB,SAACC,IAAD,QAAUjB,CAAAA,eAAe,CAACiB,IAAD,CAAzB,EAAtB,CAAD,CAA3B,EADkC,CAAP,EAAD,CAE/B,EAF+B,CAAlC,CARgC,qBAWuBhB,cAAc,CAACY,cAAD,CAXrC,2FAWdK,YAXc,mBAWvBT,OAXuB,CAWOU,UAXP,mBAWAT,KAXA,CAahC,GAAIA,KAAJ,CAAW,mBAAO,6EAAP,CACX,GAAID,OAAJ,CAAa,mBAAO,iEAAP,CACb,mBACE,4CACE,oBAAC,WAAD,EAAa,IAAI,CAAC,OAAlB,CAA0B,MAAM,CAAEL,KAAlC,EADF,CAEGe,UAAU,eAAI,0BAAI,cAAY,eAAhB,iDAFjB,CAGG,CAACA,UAAD,EAAeD,YAAf,eAA+B,iEAHlC,CAIG,CAACC,UAAD,EAAe,CAACD,YAAhB,EAAgCP,SAAhC,eAA6C,oBAAC,QAAD,EAAU,KAAK,CAAEA,SAAjB,EAJhD,CADF,CAQD,CAMD,cAAeT,CAAAA,gBAAf","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { DetailsCard, Carrosel } from '../../components';\n\nimport { fetchDrinkApi, handleDrinksData } from '../../services/APIs/DRINKS_API';\nimport { fetchFoodsApi, handleFoodsData } from '../../services/APIs/FOODS_API';\nimport useRequisition from '../../hooks/requisition';\n\nfunction DrinkDetailsPage({ id }) {\n  const [drink, setDrink] = useState(null);\n  const fetchDrink = useCallback(() => fetchDrinkApi(`lookup.php?i=${id}`)\n    .then(({ drinks }) => setDrink(handleDrinksData(drinks[0])))\n  , [id]);\n  const [{ loading, error }] = useRequisition(fetchDrink);\n\n  const [recomends, setRecomends] = useState(null);\n  const fetchRecomends = useCallback(() => (fetchFoodsApi()\n    .then(({ meals }) => setRecomends(meals.slice(0, 6).map((meal) => handleFoodsData(meal))))\n  ), []);\n  const [{ loading: loadingRecom, error: errorRecom }] = useRequisition(fetchRecomends);\n\n  if (error) return <h1>Aconteceu algo errado em detalhes de bebidas</h1>;\n  if (loading) return <h1>Carrgando detalhes de bebidas...</h1>;\n  return (\n    <div>\n      <DetailsCard type=\"drink\" recipe={drink} />\n      {errorRecom && <h3 data-testid=\"error-details\">Aconteceu algo errado em recomendações</h3>}\n      {!errorRecom && loadingRecom && <h3>Carregando detalhes de comida...</h3>}\n      {!errorRecom && !loadingRecom && recomends && <Carrosel cards={recomends} />}\n    </div>\n  );\n}\n\nDrinkDetailsPage.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default DrinkDetailsPage;\n"]},"metadata":{},"sourceType":"module"}