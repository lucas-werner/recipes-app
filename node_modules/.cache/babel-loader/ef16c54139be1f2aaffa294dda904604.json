{"ast":null,"code":"import _slicedToArray from\"/home/lucaswerner/repositories/github-personal/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import{DetailsCard,Carrosel}from'../../components';import{fetchFoodsApi,handleFoodsData}from'../../services/APIs/FOODS_API';import{fetchDrinkApi,handleDrinksData}from'../../services/APIs/DRINKS_API';import useRequisition from'../../hooks/requisition';function FoodDetailsPage(_ref){var id=_ref.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];var fetchFood=useCallback(function(){return fetchFoodsApi(\"lookup.php?i=\".concat(id)).then(function(_ref2){var meals=_ref2.meals;return setFood(handleFoodsData(meals[0]));});},[setFood,id]);var _useRequisition=useRequisition(fetchFood),_useRequisition2=_slicedToArray(_useRequisition,1),_useRequisition2$=_useRequisition2[0],loading=_useRequisition2$.loading,error=_useRequisition2$.error;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),recomends=_useState4[0],setRecomends=_useState4[1];var fetchRecomends=useCallback(function(){return fetchDrinkApi().then(function(_ref3){var drinks=_ref3.drinks;return setRecomends(drinks.slice(0,6).map(function(drk){return handleDrinksData(drk);}));});},[]);var _useRequisition3=useRequisition(fetchRecomends),_useRequisition4=_slicedToArray(_useRequisition3,1),_useRequisition4$=_useRequisition4[0],loadingRecom=_useRequisition4$.loading,errorRecom=_useRequisition4$.error;if(error)return/*#__PURE__*/React.createElement(\"h1\",null,\"Aconteceu algo errado em detalhes de comida\");if(loading)return/*#__PURE__*/React.createElement(\"h1\",null,\"Carregando receita\");return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(DetailsCard,{type:\"food\",recipe:food}),errorRecom&&/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"error-recom\"},\"Aconteceu algo errado em recomenda\\xE7\\xF5es\"),!errorRecom&&loadingRecom&&/*#__PURE__*/React.createElement(\"h3\",null,\"Carregando receita\"),!errorRecom&&!loadingRecom&&recomends&&/*#__PURE__*/React.createElement(Carrosel,{cards:recomends}));}export default FoodDetailsPage;","map":{"version":3,"sources":["/home/lucaswerner/repositories/github-personal/recipes-app/src/pages/FoodDetailsPage/index.js"],"names":["React","useState","useCallback","DetailsCard","Carrosel","fetchFoodsApi","handleFoodsData","fetchDrinkApi","handleDrinksData","useRequisition","FoodDetailsPage","id","food","setFood","fetchFood","then","meals","loading","error","recomends","setRecomends","fetchRecomends","drinks","slice","map","drk","loadingRecom","errorRecom"],"mappings":"iLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,WAA1B,KAA6C,OAA7C,CAGA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,kBAAtC,CAEA,OAASC,aAAT,CAAwBC,eAAxB,KAA+C,+BAA/C,CACA,OAASC,aAAT,CAAwBC,gBAAxB,KAAgD,gCAAhD,CACA,MAAOC,CAAAA,cAAP,KAA2B,yBAA3B,CAEA,QAASC,CAAAA,eAAT,MAAiC,IAANC,CAAAA,EAAM,MAANA,EAAM,eACPV,QAAQ,CAAC,IAAD,CADD,wCACxBW,IADwB,eAClBC,OADkB,eAE/B,GAAMC,CAAAA,SAAS,CAAGZ,WAAW,CAAC,iBAAMG,CAAAA,aAAa,wBAAiBM,EAAjB,EAAb,CACjCI,IADiC,CAC5B,mBAAGC,CAAAA,KAAH,OAAGA,KAAH,OAAeH,CAAAA,OAAO,CAACP,eAAe,CAACU,KAAK,CAAC,CAAD,CAAN,CAAhB,CAAtB,EAD4B,CAAN,EAAD,CAC+B,CAACH,OAAD,CAAUF,EAAV,CAD/B,CAA7B,CAF+B,oBAIFF,cAAc,CAACK,SAAD,CAJZ,0FAItBG,OAJsB,mBAItBA,OAJsB,CAIbC,KAJa,mBAIbA,KAJa,gBAMGjB,QAAQ,CAAC,IAAD,CANX,yCAMxBkB,SANwB,eAMbC,YANa,eAO/B,GAAMC,CAAAA,cAAc,CAAGnB,WAAW,CAAC,iBAAOK,CAAAA,aAAa,GACpDQ,IADuC,CAClC,mBAAGO,CAAAA,MAAH,OAAGA,MAAH,OAAgBF,CAAAA,YAAY,CAACE,MAAM,CAACC,KAAP,CAAa,CAAb,CAAgB,CAAhB,EAAmBC,GAAnB,CAAuB,SAACC,GAAD,QAASjB,CAAAA,gBAAgB,CAACiB,GAAD,CAAzB,EAAvB,CAAD,CAA5B,EADkC,CAAP,EAAD,CAE/B,EAF+B,CAAlC,CAP+B,qBAUwBhB,cAAc,CAACY,cAAD,CAVtC,2FAUbK,YAVa,mBAUtBT,OAVsB,CAUQU,UAVR,mBAUCT,KAVD,CAY/B,GAAIA,KAAJ,CAAW,mBAAO,4EAAP,CACX,GAAID,OAAJ,CAAa,mBAAO,mDAAP,CACb,mBACE,4CACE,oBAAC,WAAD,EAAa,IAAI,CAAC,MAAlB,CAAyB,MAAM,CAAEL,IAAjC,EADF,CAEGe,UAAU,eAAI,0BAAI,cAAY,aAAhB,iDAFjB,CAGG,CAACA,UAAD,EAAeD,YAAf,eAA+B,mDAHlC,CAIG,CAACC,UAAD,EAAe,CAACD,YAAhB,EAAgCP,SAAhC,eAA6C,oBAAC,QAAD,EAAU,KAAK,CAAEA,SAAjB,EAJhD,CADF,CAQD,CAMD,cAAeT,CAAAA,eAAf","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { DetailsCard, Carrosel } from '../../components';\n\nimport { fetchFoodsApi, handleFoodsData } from '../../services/APIs/FOODS_API';\nimport { fetchDrinkApi, handleDrinksData } from '../../services/APIs/DRINKS_API';\nimport useRequisition from '../../hooks/requisition';\n\nfunction FoodDetailsPage({ id }) {\n  const [food, setFood] = useState(null);\n  const fetchFood = useCallback(() => fetchFoodsApi(`lookup.php?i=${id}`)\n    .then(({ meals }) => setFood(handleFoodsData(meals[0]))), [setFood, id]);\n  const [{ loading, error }] = useRequisition(fetchFood);\n\n  const [recomends, setRecomends] = useState(null);\n  const fetchRecomends = useCallback(() => (fetchDrinkApi()\n    .then(({ drinks }) => setRecomends(drinks.slice(0, 6).map((drk) => handleDrinksData(drk))))\n  ), []);\n  const [{ loading: loadingRecom, error: errorRecom }] = useRequisition(fetchRecomends);\n\n  if (error) return <h1>Aconteceu algo errado em detalhes de comida</h1>;\n  if (loading) return <h1>Carregando receita</h1>;\n  return (\n    <div>\n      <DetailsCard type=\"food\" recipe={food} />\n      {errorRecom && <h3 data-testid=\"error-recom\">Aconteceu algo errado em recomendações</h3>}\n      {!errorRecom && loadingRecom && <h3>Carregando receita</h3>}\n      {!errorRecom && !loadingRecom && recomends && <Carrosel cards={recomends} />}\n    </div>\n  );\n}\n\nFoodDetailsPage.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default FoodDetailsPage;\n"]},"metadata":{},"sourceType":"module"}